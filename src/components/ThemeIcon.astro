---

---

<button
  id="themeToggle"
  class="flex items-center gap-1.5"
  aria-label="Toggle dark mode"
  transition:persist
>
  <span class="text-xs font-bold tracking-tighter">Lights</span>
  <span class="w-8 h-5 border-2 border-text rounded-full flex p-0.5">
    <span
      id="themeToggleMarker"
      class="h-3 w-3 border-2 border-text block rounded-full transition-transform"
    ></span>
  </span>
</button>

<script>
  const setToggleListener = () => {
    let toggleBtn = document.querySelector<HTMLButtonElement>("#themeToggle");

    const updateButtonText = () => {
      const isDark = document.documentElement.classList.contains("dark");
      const toggleMarker =
        document.querySelector<HTMLSpanElement>("#themeToggleMarker");

      if (!toggleMarker) {
        return;
      }

      toggleMarker.style.transform = isDark
        ? "translateX(0)"
        : "translateX(100%)";

      isDark
        ? toggleMarker.classList.remove("bg-text")
        : toggleMarker.classList.add("bg-text");
    };

    const handleToggleClick = () => {
      const element = document.documentElement;
      element.classList.toggle("dark");

      const isDark = element.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
      updateButtonText();
    };

    toggleBtn?.addEventListener("click", handleToggleClick);
    updateButtonText();
  };

  setToggleListener();
</script>
